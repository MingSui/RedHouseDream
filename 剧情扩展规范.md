# 《红楼梦》游戏剧情扩展规范

本规范旨在指导AI如何按照现有游戏框架扩展《红楼梦》游戏的剧情内容，确保扩展内容的一致性和可玩性。

## 一、场景文件命名规范

1. **基础场景命名**：`sceneX.json`（X为数字，表示场景顺序）
   - 示例：`scene6.json`

2. **分支场景命名**：`sceneX_b.json`、`sceneX_c.json`（X为基础场景数字，b、c等表示分支）
   - 示例：`scene6_b.json`、`scene6_c.json`

3. **后续场景命名**：`sceneX_a.json`、`sceneX_b.json`（X为后续场景数字，a、b等表示不同分支的后续）
   - 示例：`scene7_a.json`、`scene7_b.json`

## 二、JSON结构规范

每个场景文件必须包含以下字段：

```json
{
    "id": "sceneX",             // 场景唯一标识
    "title": "场景标题",         // 场景标题（显示在页面上）
    "description": "场景描述",   // 场景详细描述（游戏中显示的主要内容）
    "choices": [                // 选择项数组（可选，没有选择项时可以省略）
        {
            "text": "选择文本",  // 选择按钮上显示的文本
            "luckChange": 5,     // 幸运值变化（正数增加，负数减少）
            "nextScene": "下一场景标题"  // 选择后跳转的场景标题
            // 当nextScene为"end"时，必须包含endingText字段
            // "endingText": "结局文本"
        }
        // 可以有多个选择项
    ]
}
```

## 三、分支设计原则

1. **多分支起点**：从一个基础场景（如scene5）衍生出多个分支场景
   - 每个选择项对应一个不同的分支场景
   - 分支场景应该反映玩家选择的直接后果

2. **分支差异化**：不同分支应该有明显的剧情差异
   - 角色反应不同
   - 对话内容不同
   - 幸运值变化不同

3. **合理的幸运值设置**：
   - 积极的选择通常增加幸运值（5-10）
   - 消极的选择通常减少或小幅增加幸运值（-2-3）
   - 中性的选择幸运值变化较小（2-4）

## 四、收束设计原则

1. **自然收束**：分支剧情应该在适当的时候自然收束
   - 可以通过共同的事件（如贾母传唤）将分支收束
   - 收束场景应该能够容纳不同分支的前情

2. **收束点选择**：
   - 选择重要的剧情节点作为收束点（如见贾母、家族聚会等）
   - 收束点应该是故事发展的关键环节

3. **保持连贯性**：收束后的剧情应该保持与之前分支的连贯性
   - 可以在收束场景中巧妙提及之前的选择
   - 不同分支的玩家在收束场景中应该有相似的体验

## 五、剧情连接规则

1. **场景跳转**：使用`nextScene`字段指定下一个场景
   - `nextScene`的值必须是目标场景的`title`字段值
   - 当剧情需要结束时，`nextScene`设置为"end"

2. **结束场景**：当`nextScene`为"end"时，必须包含`endingText`字段
   - `endingText`应该总结当前阶段的剧情
   - 可以提示玩家后续章节的内容

3. **无选择场景**：当场景不需要玩家选择时，可以省略`choices`字段
   - 此时应该包含`nextScene`字段
   - 游戏会自动显示"点击任意处继续"

## 六、扩展流程示例

1. **分析现有场景**：查看当前最后一个场景的内容和选择项

2. **修改现有场景**：将直接结束的选择项改为指向新场景
   ```json
   // 修改前
   {"nextScene": "end", "endingText": "..."}
   
   // 修改后
   {"nextScene": "新场景标题"}
   ```

3. **创建分支场景**：为每个选择项创建对应的分支场景
   - 确保分支场景的标题与`nextScene`值一致
   - 设计不同的剧情发展

4. **创建后续场景**：为每个分支场景创建后续发展
   - 可以继续分支，也可以开始收束

5. **创建收束场景**：将不同分支收束到共同的场景
   - 确保收束场景能够连接所有分支

6. **创建结束场景**：在适当的时机创建结束场景，总结剧情

## 七、内容创作建议

1. **忠实原著**：剧情内容应该尽量忠实于《红楼梦》原著
   - 角色性格要符合原著设定
   - 场景描写要符合原著氛围

2. **保持连贯性**：新扩展的剧情要与之前的剧情保持连贯
   - 提及之前的事件和选择
   - 保持角色关系的一致性

3. **增加互动性**：设计有意义的选择项
   - 选择应该影响剧情发展
   - 选择应该反映角色的性格和价值观

4. **注意节奏**：控制场景的长度和节奏
   - 避免过长的描述
   - 确保剧情发展流畅自然

## 八、示例

### 1. 基础场景扩展示例（scene5.json）

修改前：
```json
{
    "choices": [
        {
            "text": "含羞接过，轻声道谢",
            "luckChange": 8,
            "nextScene": "end",
            "endingText": "..."
        }
    ]
}
```

修改后：
```json
{
    "choices": [
        {
            "text": "含羞接过，轻声道谢",
            "luckChange": 8,
            "nextScene": "宝玉惊喜"
        }
    ]
}
```

### 2. 分支场景示例（scene6.json）

```json
{
    "id": "scene6",
    "title": "宝玉惊喜",
    "description": "宝玉见黛玉接过通灵宝玉，脸上立刻绽放出灿烂的笑容...",
    "choices": [
        {
            "text": "跟随丫鬟前往正厅",
            "luckChange": 5,
            "nextScene": "贾母关切"
        },
        {
            "text": "向宝玉询问这玉的来历",
            "luckChange": 3,
            "nextScene": "通灵玉的故事"
        }
    ]
}
```

### 3. 收束场景示例（scene8.json）

```json
{
    "id": "scene8",
    "title": "贾母关切",
    "description": "宝玉和黛玉跟随丫鬟来到正厅，只见贾母早已坐在那里等候...",
    "choices": [
        {
            "text": "乖巧地坐在贾母身边",
            "luckChange": 6,
            "nextScene": "贾府的温暖"
        },
        {
            "text": "观察周围的环境和人物",
            "luckChange": 4,
            "nextScene": "贾府的规矩"
        }
    ]
}
```

### 4. 结束场景示例（scene9.json）

```json
{
    "id": "scene9",
    "title": "贾府的温暖",
    "description": "黛玉乖巧地坐在贾母身边，感受着老人家传来的温暖...",
    "choices": [
        {
            "text": "细细品味桂花糕，感受贾府的温暖",
            "luckChange": 10,
            "nextScene": "end",
            "endingText": "黛玉在贾府的生活就这样开始了..."
        }
    ]
}
```

## 九、检查清单

在完成剧情扩展后，请检查以下项目：

1. [ ] 所有场景文件命名符合规范
2. [ ] 所有JSON文件格式正确
3. [ ] 所有`nextScene`值与目标场景的`title`一致
4. [ ] 分支剧情设计合理，有差异化
5. [ ] 收束剧情自然，保持连贯性
6. [ ] 幸运值设置合理，符合选择的性质
7. [ ] 内容忠实于原著，保持角色一致性
8. [ ] 剧情发展流畅，节奏适当

遵循以上规范，可以确保《红楼梦》游戏的剧情扩展保持高质量和一致性，为玩家提供良好的游戏体验。